select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
install.packages("httpuv")
install.packages("httpuv")
# STARTUP
library(spotifyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token <- get_spotify_access_token()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
?kable
install(knitr)
library(knitr)
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
?select
library(dyplyr)
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
library(dyplyr)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token <- get_spotify_access_token()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token <- get_spotify_access_token()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
select(
all_of(c("track.name", "artist.name", "track.album.name", "played_at"))
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 5) %>%
mutate(
artist.name = map_chr(track.artists, function(x) x$name[1]),
played_at = as_datetime(played_at)
) %>%
kable()
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = get_spotify_authorization_code(),
include_meta_info = FALSE)
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = get_spotify_authorization_code(),
include_meta_info = FALSE)
authorization = get_spotify_authorization_code()
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = authorization,
include_meta_info = FALSE)
# STARTUP
library(spotifyr)
library(knitr)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token <- get_spotify_access_token()
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = get_spotify_authorization_code(),
include_meta_info = FALSE)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token = get_spotify_access_token()
oauth = get_spotify_authorization_code()
oauth
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = oauth,
include_meta_info = FALSE)
?spotifyr
# SCRIPT
get_my_recently_played(limit = 20, after = NULL, before = NULL,
authorization = oauth)
# SCRIPT
get_my_recently_played(limit = 20,authorization = oauth)
get_my_profile(oauth)
oauth
get_my_profile(oauth)
get_discography("grandson",oauth)
get_discography("grandson",oauth)
get_discography(artist = "grandson",authorization = oauth)
get_discography(artist="grandson")
# STARTUP
library(spotifyr)
library(knitr)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token = get_spotify_access_token()
oauth = get_spotify_authorization_code()
# SCRIPT
get_my_recently_played(limit = 20, authorization = oauth)
# SCRIPT
get_my_recently_played(limit = 20)
oauth = get_spotify_authorization_code("user-read-recently-played")
oauth = get_spotify_authorization_code(scope = "user-read-recently-played")
oauth = get_spotify_authorization_code(scope = "user-read-recently-played")
# SCRIPT
get_my_recently_played(limit = 20, authorization = oauth)
scopes
for (i in scopes()) {print(i)}
scopes()
oauth = get_spotify_authorization_code()
# SCRIPT
get_my_recently_played(authorization = oauth)
scopes = c(
"user-library-read",
"user-read-recently-played",
"playlist-read-private",
"playlist-read-collaborative",
"user-read-private"
)
oauth = get_spotify_authorization_code(Sys.getenv("SPOTIFY_CLIENT_ID"),
Sys.getenv("SPOTIFY_CLIENT_SECRET"),
scopes)
# SCRIPT
get_my_recently_played(authorization = oauth)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token = get_spotify_access_token()
scopes = c(
"user-library-read",
"user-read-recently-played",
"playlist-read-private",
"playlist-read-collaborative",
"user-read-private"
)
oauth = get_spotify_authorization_code(Sys.getenv("SPOTIFY_CLIENT_ID"),
Sys.getenv("SPOTIFY_CLIENT_SECRET"),
scopes)
# SCRIPT
get_my_recently_played(authorization = oauth)
# STARTUP
library(spotifyr)
library(knitr)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token = get_spotify_access_token()
scopes = c(
"user-library-read",
"user-read-recently-played",
"playlist-read-private",
"playlist-read-collaborative",
"user-read-private"
)
oauth = get_spotify_authorization_code(Sys.getenv("SPOTIFY_CLIENT_ID"),
Sys.getenv("SPOTIFY_CLIENT_SECRET"),
scopes)
# SCRIPT
get_my_recently_played(authorization = oauth)
oauth = get_spotify_authorization_code(Sys.getenv("SPOTIFY_CLIENT_ID"),
Sys.getenv("SPOTIFY_CLIENT_SECRET"),
scopes)
# SCRIPT
get_my_recently_played(authorization = oauth)
oauth = get_spotify_authorization_code(scope = "user-read-recently-played")
# SCRIPT
get_my_recently_played(authorization=oauth)
scopes = c(
"user-library-read",
"user-read-recently-played"
)
oauth = get_spotify_authorization_code(scope = scopes)
# SCRIPT
get_my_recently_played(authorization=oauth)
# SCRIPT
get_my_recently_played(authorization=oauth)
get_playlist_audio_features("william124816", playlist_uris,
authorization = oauth)
playlist_uris = c("365wYUS1iYFDScU0JdSQ0G")
get_playlist_audio_features("william124816", playlist_uris,
authorization = oauth)
get_playlist_audio_features(username = "william124816", playlist_uris = playlist_uris,
authorization = oauth)
get_playlist_audio_features(username = "william124816", playlist_uris = "365wYUS1iYFDScU0JdSQ0G", authorization = oauth)
uris = c("365wYUS1iYFDScU0JdSQ0G")
get_playlist_audio_features(username = "william124816", playlist_uris = uris, authorization = oauth)
get_playlist_audio_features("william124816", uris, authorization = oauth)
get_playlist_audio_features("william124816", uris)
get_my_recently_played(authorization=oauth)
get_playlist_audio_features("william124816", uris)
uris = c("365wYUS1iYFDScU0JdSQ0G")
get_playlist_audio_features("william124816", uris, oauth)
get_playlist_audio_features("william124816", uris, authorization = access_token)
access_token = get_spotify_access_token()
get_playlist_audio_features("william124816", uris, authorization = access_token)
get_playlist_audio_features("Liam!!!", uris, authorization = access_token)
uris = c("45i51TCBS6sxl33wtMtZm4")
get_playlist_audio_features("Liam!!!", uris, authorization=access_token)
df = data.frame(get_playlist_audio_features("Liam!!!", uris, authorization=access_token))
View(df)
# uris = c("45i51TCBS6sxl33wtMtZm4")
uris = c("37i9dQZF1DWW2hj3ZtMbuO")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
View(df)
# uris = c("45i51TCBS6sxl33wtMtZm4")
uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
View(df)
df["valence"]
df["valence","dancability"]
select(df, c("track.name","dancability","energy","speechiness","liveness","valence"))
select(df, c("track.name","dancebility","energy","speechiness","liveness","valence"))
select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
new_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
View(new_df)
View(df)
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
data$index <- 1:nrow(data)
new_df = select(df, c("index","track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
df$index <- 1:nrow(df)
new_df = select(df, c("index","track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
setwd("~/Documents/Homework/INFSCI 0310/spotify-mood-suggestions")
write.csv(new_df, "feeling_good_breakdown.csv")
write.csv(new_df, "feeling_good_breakdown.csv")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
new_df = select(df, c("index","track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
write.csv(new_df, "feeling_good_breakdown.csv")
# STARTUP
library(spotifyr)
library(knitr)
library(dplyr)
Sys.setenv(SPOTIFY_CLIENT_ID = '8be2402f0a3b40bd9f636bd95ef2711d')
Sys.setenv(SPOTIFY_CLIENT_SECRET = 'b8112b6d16da4cf0ae0d8f13a3ac0cbc')
access_token = get_spotify_access_token()
scopes = c(
"user-library-read",
"user-read-recently-played"
)
oauth = get_spotify_authorization_code(scope = scopes)
# uris = c("45i51TCBS6sxl33wtMtZm4")
uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
# SCRIPT
get_my_recently_played(authorization=oauth)
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
new_df = select(df, c("index","track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
new_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
# uris = c("45i51TCBS6sxl33wtMtZm4")
# uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
uris = c("2ryI0oeYtWavBUlJDP2GVV")
# uris = c("45i51TCBS6sxl33wtMtZm4")
# uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
uris = c("2ryI0oeYtWavBUlJDP2GVV")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
new_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
# uris = c("45i51TCBS6sxl33wtMtZm4")
uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
new_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "feeling_good_breakdown.csv")
# uris = c("45i51TCBS6sxl33wtMtZm4")
# uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
uris = c("2ryI0oeYtWavBUlJDP2GVV")
df = data.frame(get_playlist_audio_features("jsanchioli", uris, authorization=access_token))
new_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(new_df, "creepy_crawley_breakdown.csv")
print(get_playlist("jsanchioli", uris, authorization=access_token))
# uris = c("45i51TCBS6sxl33wtMtZm4")
# uris = c("2bJAHjVNPyb0Dsd6iEhBxP")
uris = c("2ryI0oeYtWavBUlJDP2GVV")
print(get_playlist("jsanchioli", uris, authorization=access_token))
source("setup.R")
args = commandArgs(trailingOnly=TRUE)
args
if (length(args)==0) {
url = "https://open.spotify.com/playlist/45i51TCBS6sxl33wtMtZm4?si=08fb25e77ef94951"
} else {
url = args[2]
}
url
playlist_id = regexpr("\/([A-z0-9]+)\?",url)
playlist_id = regexpr("/([A-z0-9]+)\?",url)
playlist_id = regexpr("/([A-z0-9]+)?",url)
playlist_id
library(stringr)
playlist_id = grep("/([A-z0-9]+)?",url)
playlist_id
playlist_id = grep("\/([A-z0-9]+)\?",url)
playlist_id = grep("/([A-z0-9]+)?",url)
playlist_id
playlist_id = grepexpr("/([A-z0-9]+)?",url)
playlist_id = gregexpr("/([A-z0-9]+)?",url)
playlist_id = grepexpr("/([A-z0-9]+)?",url)
playlist_id
playlist_id = rexpr("/([A-z0-9]+)?",url)
playlist_id = regexpr("/([A-z0-9]+)?",url)
playlist_id
playlist_id = sub("/([A-z0-9]+)?",url)
playlist_id = grep("/([A-z0-9]+)?",url,value = TRUE)
playlist_id
playlist_id = grep("\/([A-z0-9]+)\?",url,value = TRUE)
playlist_id
playlist_id = grep("/([A-z0-9]+)?",url,value = TRUE)
playlist_id
playlist_id = grep("/([:alnum:]+)?",url,value = TRUE)
playlist_id
playlist_id = grep("/[:alnum:]+?",url,value=TRUE)
playlist_id
playlist_id = grep("/[:alnum:]+?",url,value=TRUE)
playlist_id
playlist_id = grep("/([A-z0-9]+)?",url,value = TRUE)
playlist_id
playlist_id = gsub("/([A-z0-9]+)?",url,value = TRUE)
playlist_id = gsub("/([A-z0-9]+)?",url)
playlist_id = sub("/([A-z0-9]+)?",url)
library(stringr)
playlist_id = str_match("/([A-z0-9]+)?",url)
playlist_id
playlist_id = str_match("/([A-z0-9]+)?",url)
print(playlist_id)
playlist_id = str_match("/([A-z0-9]+)?",url)
print(playlist_id)
playlist_id = str_match("\/([A-z0-9]+)\?",url)
print(playlist_id)
playlist_id = str_match(url,"\/([A-z0-9]+)\?")
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)?")
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)\?")
playlist_id = str_match(url,"/([A-z0-9]+)?")
print(playlist_id)
playlist_id = str_match(url,c("/([A-z0-9]+)?"))
print(playlist_id)
playlist_id = str_match(c(url),c("/([A-z0-9]+)?"))
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)?")
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)\?")
playlist_id = str_match(url,"/[A-z0-9]+?")
print(playlist_id)
playlist_id = str_match(url,"/[A-z0-9]+\?")
playlist_id = str_match(url,"/[A-z0-9]+\\?")
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)\\?")
print(playlist_id)
playlist_id = str_match(url,"/([A-z0-9]+)\\?")[2]
print(playlist_id)
df = data.frame(get_playlist_audio_features("jsanchioli", playlist_id))
View(df)
df = data.frame(get_playlist_audio_features(playlist_id))
df = data.frame(get_playlist_audio_features(playlist_uris = playlist_id))
df = data.frame(get_playlist_audio_features(playlist_uris = playlist_id))
features_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
View(df)
name = df["playlist_name"][1]
name
name = df["playlist_name"]
name
name[1]
name[1][1]
name[2
]
name
df["playlist_name"][1]
name = df["playlist_name",1]
name
name = df[1,"playlist_name"]
name
name = tolower(df[1,"playlist_name"])
name
?replace
?str_replace
name = str_replace(tolower(df[1,"playlist_name"])," ", "_")
name
name = str_replace_all(tolower(df[1,"playlist_name"])," ", "_")
name
name
name = str_replace_all(tolower(df[1,"playlist_name"])," ", "_") + ".csv"
name = str_replace_all(tolower(df[1,"playlist_name"])," ", "_") + ".csv"
name = str_replace_all(tolower(df[1,"playlist_name"])," ", "_") & ".csv"
name = str_c(str_replace_all(tolower(df[1,"playlist_name"])," ", "_"), ".csv")
name
features_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
write.csv(features_df, name)
?str_match
source("setup.R",echo = FALSE)
source("setup.R", echo = FALSE)
print("Generating a report for",name)
name = df[1,"playlist_name"]
args = commandArgs(trailingOnly=TRUE)
if (length(args)==0) {
stop("Rscript generate_playlist_report.R --args SPOTIFY_URL_FOR_PLAYLIST")
} else {
url = args[2]
}
playlist_id = str_match(url,"/([A-z0-9]+)\\?")[2]
df = data.frame(get_playlist_audio_features(playlist_uris=playlist_id))
name = df[1,"playlist_name"]
filename = str_c(str_replace_all(tolower(name)," ", "_"), ".csv")
print("Generating a report for",name)
features_df = select(df, c("track.name","danceability","energy","speechiness","liveness","valence"))
?paste
